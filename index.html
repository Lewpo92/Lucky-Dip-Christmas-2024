<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Pairing</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        body {
            padding: 10px;
            font-family: 'Poppins', sans-serif;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow-x: hidden;
            background-image: url('four_leaf_clover.png'); /* Adjust the path as needed */
            background-size: cover; /* Makes the image cover the entire viewport */
            background-repeat: no-repeat; /* Prevents the image from repeating */
            background-position: center; /* Centers the background image */
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: center; /* Center aligns header items */
            width: 100%;
            margin-bottom: 20px; /* Adjust as needed */
            flex-wrap: wrap; /* Allow items to wrap on small screens */
        }

        .text-container {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 10px; /* Adjust this for more or less padding */
            background: rgba(255, 255, 255, 0.8); /* Optional background color */
            border-radius: 5px; /* Rounded corners */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Optional shadow */
            margin: 5px; /* Space between text and logo */
        }

        .header-text {
            font-size: 18px; /* Default size */
            font-weight: bold; /* Make text bold */
            color: #28a745; /* Changed font color to green */
            text-align: center; /* Center text */
        }

        .header-text i {
            margin-left: 5px; /* Space between text and icon */
            font-size: 1.2em; /* Adjust size of the icon */
        }

        @media (max-width: 600px) { /* Media query for smaller screens */
            .header-text {
                font-size: 16px; /* Reduce text size for smaller screens */
            }

            .header-text i {
                font-size: 1.1em; /* Slightly reduce icon size */
            }
        }

        @media (max-width: 400px) { /* Even smaller screens */
            .header-text {
                font-size: 14px; /* Further reduce text size */
            }

            .header-text i {
                font-size: 1em; /* Further reduce icon size */
            }
        }

        .logo {
            width: 80px;
            margin: 0 10px; /* Margin around logo */
        }

        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.75);
            color: white;
            padding: 15px 30px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
            transition: opacity 0.5s ease, top 0.5s ease;
        }

        .container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            width: 100%;
            max-width: 100vw;
            padding: 15px;
            margin: 0;
            position: relative;
            z-index: 1;
        }

        .group-column,
        .pair-column {
            width: 48%;
            display: flex;
            flex-direction: column;
            margin: 5px;
        }

        .group-header {
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            color: #28a745;
            margin-bottom: 8px;
            border-bottom: 1px solid #28a745;
            padding-bottom: 4px;
        }

        .pair-column .group-header {
            font-size: 24px; /* Increased size for paired names header */
        }

        .random-btn {
            margin-bottom: 10px;
            padding: 6px 12px;
            background: linear-gradient(135deg, #28a745 0%, #218838 100%);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 24px; /* Doubled size for button text */
            color: #fff;
            transition: background-color 0.3s, transform 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .random-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }

        .random-btn:disabled {
            background: #b2d0b2;
            cursor: not-allowed;
        }

        .fas {
            font-size: 2em;
        }

        .random-btn i {
            font-size: 1.5em;
            margin-right: 5px;
        }

        #group1,
        #group2 {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 6px;
        }

        .name {
            transition: background-color 0.3s, box-shadow 0.3s;
            font-size: 10px;
            text-align: center;
            padding: 6px;
            background: #ffffff;
            border: none;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .highlight {
            background: gold !important;
            color: #000;
        }

        .final-groups-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            width: 100%;
            max-width: 800px;
            margin-top: 60px;
            background: #ffffff;
            border-radius: 10px;
            padding: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .group {
            background: #ffffff;
            border-radius: 5px;
            padding: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .final-group-header {
            font-size: 14px;
            color: #28a745;
            margin-bottom: 6px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 4px;
        }

        @media (max-width: 768px) {
            .group-column,
            .pair-column {
                width: 100%;
            }

            #group1,
            #group2 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .random-btn {
                width: 100%;
            }

            .name {
                font-size: 9px;
            }

            .final-group-header {
                font-size: 12px;
            }
        }

        @media print {
            body {
                background: none;
                color: black;
                font-size: 10px;
                margin: 0;
                padding: 0;
            }

            .container {
                padding: 0;
                box-shadow: none;
                max-width: 100%;
                width: 100%;
            }

            .final-groups-container {
                display: block;
                max-width: 100%;
            }

            .final-group-header {
                page-break-inside: avoid;
                font-size: 12px;
            }

            .random-btn,
            .remove {
                display: none;
            }

            .pair {
                margin: 2px 0;
                page-break-inside: avoid;
                padding: 3px;
                font-size: 9px;
            }

            #finalGroups {
                page-break-after: auto;
                text-align: center;
                margin: 0 auto;
            }

            .group {
                page-break-inside: avoid;
                margin-bottom: 10px;
            }

            #group1,
            #group2 {
                display: block;
            }

            .group-column,
            .pair-column {
                width: auto;
                display: block;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <div class="text-container" id="left-text-container">
            <span class="header-text" id="left-text">Lucky Dip <i class="fas fa-clover"></i></span>
        </div>
        <img src="MPL_Logo.png" class="logo" alt="Logo">
        <div class="text-container" id="right-text-container">
            <span class="header-text" id="right-text">Christmas 2024</span>
        </div>
    </div>

    <div class="popup" id="popup"></div>

    <div class="container">
        <div class="group-column">
            <button class="random-btn" onclick="randomPair()" id="randomButton">
                <i class="fas fa-dice"></i> Random Pair Generator
            </button>
            <h3 class="group-header">Pro's</h3>
            <div id="group1"></div>
            <h3 class="group-header">Amateur's</h3>
            <div id="group2"></div>
        </div>
        <div class="pair-column">
            <h2 class="group-header"><i class="fas fa-handshake"></i> Paired Names:</h2>
            <div id="pairList"></div>
        </div>
    </div>
    <div id="finalGroups" class="final-groups-container" style="display: none;"></div>

    <script>
        // Shuffle Function
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        const names1 = ["Andy Shard", "Barry Buckley", "Carl Meehan", "Dave Cobey", "Dave Leishman", "Eddie Williams",
            "Eric Simpson", "Dave Hine", "Jon Sellars", "Lewis Ditchfield", "Liam Cox", "Maddy Wilkinson",
            "Marc Corbett", "Paul Barton", "Paul Snape AKA snap", "Pete Eccles", "Rob Sheldon", "Roy Whyatt",
            "Steve Hilditch", "Will Bell"];
        const names2 = ["Ash Rigby", "Bob Moody", "Brad Newton", "Brad Oldman", "Caroline Malkin", "Catherine Raybould",
            "Conor Smith", "James Ellis", "David Thomas", "Ian Barton", "Ian Clarke", "Ian Jackson", "James Dale",
            "Jason Tunnicliffe", "Lesley Eccles", "Maria Snape", "Matt Furnivall", "Matt Mason", "Matty Barber", "Wendy Tomkinson"];

        shuffle(names1);
        shuffle(names2);

        const group1 = document.getElementById('group1');
        const group2 = document.getElementById('group2');
        const pairList = document.getElementById('pairList');
        const randomButton = document.getElementById('randomButton');
        const popup = document.getElementById('popup');

        names1.forEach(name => createNameElement(name, group1));
        names2.forEach(name => createNameElement(name, group2));

        function createNameElement(name, group) {
            const nameDiv = document.createElement('div');
            nameDiv.className = 'name';
            nameDiv.textContent = name;
            group.appendChild(nameDiv);
        }

        let pairedNames = new Set();
        let pairCount = 0;
        const groups = ['Group A', 'Group B', 'Group C', 'Group D'];

        function addPair(names) {
            const seed = Math.floor(Math.random() * 10000);
            const pairBgColor = ['#e7f1ff', '#f0f9eb', '#fff5e6', '#fef9db'][Math.floor(pairCount / 5)];
            let groupDiv = pairCount % 5 === 0 ? createGroupDiv() : pairList.lastElementChild;

            const pairDiv = document.createElement('div');
            pairDiv.className = 'pair';
            pairDiv.textContent = `${names[0]} & ${names[1]} (Seed: ${seed})`;
            pairDiv.style.backgroundColor = pairBgColor;

            const removeButton = document.createElement('span');
            removeButton.textContent = 'Remove';
            removeButton.className = 'remove';
            removeButton.onclick = () => removePair(pairDiv, names, groupDiv);
            pairDiv.appendChild(removeButton);

            groupDiv.appendChild(pairDiv);
            pairedNames.add(names[0]);
            pairedNames.add(names[1]);

            document.querySelectorAll('.name').forEach(el => {
                if ([names[0], names[1]].includes(el.textContent))
                    el.style.backgroundColor = pairBgColor;
            });

            pairCount++;

            showPopup(`Paired: ${names[0]} & ${names[1]}`);

            checkAllPaired();
        }

        function showPopup(message) {
            popup.textContent = message;
            popup.style.display = 'block';
            popup.style.opacity = 1;
            setTimeout(() => {
                popup.style.opacity = 0;
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 500);
            }, 3000);
        }

        function createGroupDiv() {
            const groupDiv = document.createElement('div');
            groupDiv.className = 'group';
            groupDiv.innerHTML = `<h3 class="final-group-header">${groups[Math.floor(pairCount / 5)]}</h3>`;
            pairList.appendChild(groupDiv);
            return groupDiv;
        }

        function removePair(pairDiv, names, groupDiv) {
            groupDiv.removeChild(pairDiv);
            pairedNames.delete(names[0]);
            pairedNames.delete(names[1]);
            document.querySelectorAll('.name').forEach(el => {
                if ([names[0], names[1]].includes(el.textContent))
                    el.style.backgroundColor = '';
            });

            if (groupDiv.children.length === 1)
                pairList.removeChild(groupDiv);

            pairCount--;
        }

        function randomPair() {
            randomButton.disabled = true;

            const availableNames1 = names1.filter(name => !pairedNames.has(name));
            const availableNames2 = names2.filter(name => !pairedNames.has(name));

            if (availableNames1.length === 0 || availableNames2.length === 0) {
                randomButton.disabled = false;
                return alert("No more available names to pair.");
            }

            let highlightCount = 0;
            let interval;

            function highlightNames() {
                document.querySelectorAll('.name').forEach(el => el.classList.remove('highlight'));

                const randomIndex1 = Math.floor(Math.random() * availableNames1.length);
                const randomIndex2 = Math.floor(Math.random() * availableNames2.length);

                const selectedName1 = availableNames1[randomIndex1];
                const selectedName2 = availableNames2[randomIndex2];

                document.querySelectorAll('.name')[names1.indexOf(selectedName1)].classList.add('highlight');
                document.querySelectorAll('.name')[names2.indexOf(selectedName2) + names1.length].classList.add('highlight');

                highlightCount++;
                if (highlightCount >= 5) {
                    clearInterval(interval);
                    document.querySelectorAll('.name').forEach(el => el.classList.remove('highlight'));
                    addPair([selectedName1, selectedName2]);
                    randomButton.disabled = false;
                }
            }
            interval = setInterval(highlightNames, 300);
        }

        function checkAllPaired() {
            if (pairCount === names1.length) {
                document.querySelector('.container').style.display = 'none';
                document.querySelectorAll('.pair-column h2')[0].innerHTML = "Final Groups";
                displayFinalGroups();
            }
        }

        function displayFinalGroups() {
            document.querySelectorAll('.pair-column')[0].style.display = 'none';
            document.getElementById('finalGroups').style.display = 'block';

            groups.forEach((group, index) => {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'group';
                groupDiv.innerHTML = `<h3 class="final-group-header">${group}</h3>`;

                document.querySelectorAll('.group')[index].querySelectorAll('.pair').forEach(pair => {
                    groupDiv.appendChild(pair);
                });

                document.getElementById('finalGroups').appendChild(groupDiv);
            });
        }
    </script>
</body>

</html>
